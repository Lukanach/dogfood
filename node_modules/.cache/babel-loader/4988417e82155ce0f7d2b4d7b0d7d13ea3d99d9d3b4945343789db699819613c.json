{"ast":null,"code":"var _jsxFileName = \"/home/il/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Sberuni/dogfood2/src/Products/Products/Products.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { dogFoodApi } from '../../Api/DogFoodApi';\nimport { Filters } from '../../components/Filters/Filters';\nimport { withQuery } from '../../components/HOCs/withQuery';\nimport { getSearchSelector } from '../../redux/slices/filterSlice';\nimport { getTokenSelector } from '../../redux/slices/userSlice';\nimport { ProductItem } from '../ProductItem/ProductItem';\nimport productsStyle from './products.module.css';\nimport { getQueryKey } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ProductsInner(_ref) {\n  _s();\n  let {\n    data\n  } = _ref;\n  let products = [...data];\n  const [searchParams] = useSearchParams();\n  const currentFilterName = searchParams.get('filterName');\n  switch (currentFilterName) {\n    case null:\n      products = [...data];\n      break;\n    case 'Новинки':\n      products = products.sort((item, nextItem) => {\n        const itemTime = new Date(Date.parse(item.updated_at));\n        const nextItemTime = new Date(Date.parse(nextItem.updated_at));\n        if (itemTime > nextItemTime) {\n          return -1;\n        }\n        if (itemTime < nextItemTime) {\n          return 1;\n        }\n        return 0;\n      });\n      break;\n    case 'Скидки':\n      products = products.filter(item => item.discount > 0).sort((item, nextItem) => {\n        if (item.discount > nextItem.discount) {\n          return -1;\n        }\n        if (item.discount < nextItem.discount) {\n          return 1;\n        }\n        return 0;\n      });\n      break;\n    case 'Дороже':\n      products = products.sort((item, nextItem) => {\n        if (item.price > nextItem.price) {\n          return -1;\n        }\n        if (item.price < nextItem.price) {\n          return 1;\n        }\n        return 0;\n      });\n      break;\n    case 'Дешевле':\n      products = products.sort((item, nextItem) => {\n        if (item.price < nextItem.price) {\n          return -1;\n        }\n        if (item.price > nextItem.price) {\n          return 1;\n        }\n        return 0;\n      });\n      break;\n    default:\n      break;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [products[0] && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: productsStyle.products,\n      children: products.map(product => /*#__PURE__*/_jsxDEV(ProductItem, {\n        id: product._id,\n        title: product.name,\n        photo: product.pictures,\n        price: product.price,\n        wight: product.wight,\n        discount: product.discount,\n        tags: product.tags,\n        likes: product.likes\n      }, product._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), !products[0] && products && /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductsInner, \"HWxNQEGJGSlsPJ3ubBB3081mtng=\", false, function () {\n  return [useSearchParams];\n});\n_c = ProductsInner;\nconst ProductsInnerWithQuery = withQuery(ProductsInner);\n_c2 = ProductsInnerWithQuery;\nexport function Products() {\n  _s2();\n  const userToken = useSelector(getTokenSelector);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!userToken) {\n      navigate('/signin');\n    }\n  }, [userToken]);\n  const search = useSelector(getSearchSelector);\n  const {\n    data,\n    isLoading,\n    isError,\n    error\n  } = useQuery({\n    queryKey: getQueryKey(search),\n    queryFn: () => dogFoodApi.getAllProducts(search, userToken),\n    enabled: !!userToken\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: productsStyle.search,\n      children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filters, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductsInnerWithQuery, {\n      data: data,\n      isLoading: isLoading,\n      isError: isError,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(Products, \"qdiOsUJZ4HzWSnnExFShfdlzB6U=\", false, function () {\n  return [useSelector, useNavigate, useSelector, useQuery];\n});\n_c3 = Products;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProductsInner\");\n$RefreshReg$(_c2, \"ProductsInnerWithQuery\");\n$RefreshReg$(_c3, \"Products\");","map":{"version":3,"names":["useQuery","useEffect","useSelector","useNavigate","useSearchParams","dogFoodApi","Filters","withQuery","getSearchSelector","getTokenSelector","ProductItem","productsStyle","getQueryKey","ProductsInner","data","products","searchParams","currentFilterName","get","sort","item","nextItem","itemTime","Date","parse","updated_at","nextItemTime","filter","discount","price","map","product","_id","name","pictures","wight","tags","likes","ProductsInnerWithQuery","Products","userToken","navigate","search","isLoading","isError","error","queryKey","queryFn","getAllProducts","enabled"],"sources":["/home/il/Документы/Sberuni/dogfood2/src/Products/Products/Products.jsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\nimport { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useNavigate, useSearchParams } from 'react-router-dom'\nimport { dogFoodApi } from '../../Api/DogFoodApi'\nimport { Filters } from '../../components/Filters/Filters'\nimport { withQuery } from '../../components/HOCs/withQuery'\n\nimport { getSearchSelector } from '../../redux/slices/filterSlice'\nimport { getTokenSelector } from '../../redux/slices/userSlice'\nimport { ProductItem } from '../ProductItem/ProductItem'\nimport productsStyle from './products.module.css'\nimport { getQueryKey } from './utils'\n\nfunction ProductsInner({ data }) {\n  let products = [...data]\n  const [searchParams] = useSearchParams()\n  const currentFilterName = searchParams.get('filterName')\n\n  switch (currentFilterName) {\n    case null:\n      products = [...data]\n      break\n    case 'Новинки':\n      products = products.sort((item, nextItem) => {\n        const itemTime = new Date(Date.parse(item.updated_at))\n        const nextItemTime = new Date(Date.parse(nextItem.updated_at))\n        if (itemTime > nextItemTime) {\n          return -1\n        }\n        if (itemTime < nextItemTime) {\n          return 1\n        }\n        return 0\n      })\n      break\n    case 'Скидки':\n      products = products.filter((item) => item.discount > 0).sort((item, nextItem) => {\n        if (item.discount > nextItem.discount) {\n          return -1\n        }\n        if (item.discount < nextItem.discount) {\n          return 1\n        }\n        return 0\n      })\n      break\n    case 'Дороже':\n      products = products.sort((item, nextItem) => {\n        if (item.price > nextItem.price) {\n          return -1\n        }\n        if (item.price < nextItem.price) {\n          return 1\n        }\n        return 0\n      })\n      break\n    case 'Дешевле':\n      products = products.sort((item, nextItem) => {\n        if (item.price < nextItem.price) {\n          return -1\n        }\n        if (item.price > nextItem.price) {\n          return 1\n        }\n        return 0\n      })\n      break\n\n    default:\n      break\n  }\n\n  return (\n    <div>\n      {products[0] && (\n      <ul className={productsStyle.products}>\n        {products.map((product) => (\n          <ProductItem\n            key={product._id}\n            id={product._id}\n            title={product.name}\n            photo={product.pictures}\n            price={product.price}\n            wight={product.wight}\n            discount={product.discount}\n            tags={product.tags}\n            likes={product.likes}\n          />\n        ))}\n      </ul>\n      )}\n      {!products[0] && products && (\n      <h4>По вашему запросу ничего не найдено</h4>\n      )}\n    </div>\n\n  )\n}\nconst ProductsInnerWithQuery = withQuery(ProductsInner)\n\nexport function Products() {\n  const userToken = useSelector(getTokenSelector)\n\n  const navigate = useNavigate()\n  useEffect(() => {\n    if (!userToken) {\n      navigate('/signin')\n    }\n  }, [userToken])\n\n  const search = useSelector(getSearchSelector)\n  const {\n    data, isLoading, isError, error,\n  } = useQuery({\n    queryKey: getQueryKey(search),\n    queryFn: () => dogFoodApi.getAllProducts(search, userToken),\n    enabled: !!(userToken),\n  })\n\n  return (\n    <>\n      <div className={productsStyle.search}>\n        <Search />\n      </div>\n      <Filters />\n      <ProductsInnerWithQuery\n        data={data}\n        isLoading={isLoading}\n        isError={isError}\n        error={error}\n      />\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}