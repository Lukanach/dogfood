{"ast":null,"code":"var _jsxFileName = \"/home/il/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Sberuni/dogfood2/src/Pages/Favorite/Favorite/Favorite.jsx\",\n  _s = $RefreshSig$();\nimport { useQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { dogFoodApi } from '../../../Api/DogFoodApi';\nimport { Loader } from '../../../components/Loader/Loader';\nimport { getQueryCartKey } from '../../../Products/Products/utils';\nimport { clearFavorites, getAllFavoriteProductsSelector } from '../../../redux/slices/favorite';\nimport { getTokenSelector } from '../../../redux/slices/userSlice';\nimport { FavoriteItem } from '../FavoriteItem/FavoriteItem';\nimport favoriteStyle from './favorite.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Favorite() {\n  _s();\n  const favorites = useSelector(getAllFavoriteProductsSelector);\n  const userToken = useSelector(getTokenSelector);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!userToken) {\n      navigate('/signin');\n    }\n  }, [userToken]);\n  const {\n    data: favoriteProducts,\n    isLoading,\n    isError,\n    error\n  } = useQuery({\n    queryKey: [getQueryCartKey(favorites.length)],\n    queryFn: () => dogFoodApi.getProductsByIds(favorites, userToken),\n    enabled: !!userToken\n  });\n  const clearFavoritesHandler = () => {\n    dispatch(clearFavorites());\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 25\n  }, this);\n  if (isError) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: `${error} `\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!favorites[0] && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: favoriteStyle.empty,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0412\\u044B \\u0435\\u0449\\u0451 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043B\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/products\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: favoriteStyle.button,\n          children: \"\\u0412 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), favoriteProducts[0] && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: clearFavoritesHandler,\n        className: favoriteStyle.button,\n        children: \"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: favoriteStyle.products,\n        children: favoriteProducts.map(item => /*#__PURE__*/_jsxDEV(FavoriteItem, {\n          id: item._id,\n          title: item.name,\n          photo: item.pictures,\n          price: item.price,\n          wight: item.wight,\n          discount: item.discount,\n          tags: item.tags\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Favorite, \"9uZzg1XeK9oEBvwqvImoabUXbAA=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useNavigate, useQuery];\n});\n_c = Favorite;\nvar _c;\n$RefreshReg$(_c, \"Favorite\");","map":{"version":3,"names":["useQuery","useEffect","useDispatch","useSelector","Link","useNavigate","dogFoodApi","Loader","getQueryCartKey","clearFavorites","getAllFavoriteProductsSelector","getTokenSelector","FavoriteItem","favoriteStyle","Favorite","favorites","userToken","dispatch","navigate","data","favoriteProducts","isLoading","isError","error","queryKey","length","queryFn","getProductsByIds","enabled","clearFavoritesHandler","empty","button","products","map","item","_id","name","pictures","price","wight","discount","tags"],"sources":["/home/il/Документы/Sberuni/dogfood2/src/Pages/Favorite/Favorite/Favorite.jsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { dogFoodApi } from '../../../Api/DogFoodApi'\nimport { Loader } from '../../../components/Loader/Loader'\nimport { getQueryCartKey } from '../../../Products/Products/utils'\nimport { clearFavorites, getAllFavoriteProductsSelector } from '../../../redux/slices/favorite'\nimport { getTokenSelector } from '../../../redux/slices/userSlice'\nimport { FavoriteItem } from '../FavoriteItem/FavoriteItem'\nimport favoriteStyle from './favorite.module.css'\n\nexport function Favorite() {\n  const favorites = useSelector(getAllFavoriteProductsSelector)\n  const userToken = useSelector(getTokenSelector)\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n  useEffect(() => {\n    if (!userToken) {\n      navigate('/signin')\n    }\n  }, [userToken])\n\n  const {\n    data: favoriteProducts, isLoading, isError, error,\n  } = useQuery({\n    queryKey: [getQueryCartKey(favorites.length)],\n    queryFn: () => dogFoodApi.getProductsByIds(favorites, userToken),\n    enabled: !!(userToken),\n  })\n\n  const clearFavoritesHandler = () => {\n    dispatch(clearFavorites())\n  }\n  if (isLoading) return <Loader />\n  if (isError) return <p>{`${error} `}</p>\n\n  return (\n    <div>\n      {\n            !favorites[0] && (\n            <div className={favoriteStyle.empty}>\n              <h1>Вы ещё ничего не выбрали</h1>\n              <Link to=\"/products\">\n                <button type=\"button\" className={favoriteStyle.button}>\n                  В каталог\n                </button>\n              </Link>\n            </div>\n            )\n        }\n\n      {favoriteProducts[0] && (\n        <div>\n          <button type=\"button\" onClick={clearFavoritesHandler} className={favoriteStyle.button}>\n            Очистить\n          </button>\n          <ul className={favoriteStyle.products}>\n            {favoriteProducts.map((item) => (\n              <FavoriteItem\n                key={item._id}\n                id={item._id}\n                title={item.name}\n                photo={item.pictures}\n                price={item.price}\n                wight={item.wight}\n                discount={item.discount}\n                tags={item.tags}\n              />\n            ))}\n          </ul>\n        </div>\n      )}\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}